<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMST Dashboard - Results</title>
</head>
<body>
    <h1>Your Links</h1>
    <div id="links"></div>

    <script>
        const user = JSON.parse(sessionStorage.getItem('user'));

        if (!user) {
            document.getElementById('links').innerHTML = '<p>No passcode provided or invalid passcode.</p>';
            return;
        }

        fetch('links.json')
            .then(response => response.json())
            .then(linksData => {
                let linksHTML = `<p>Welcome, ${user.name}</p><ul>`;

                // Assuming that links are categorized by passcode in links.json
                const userLinks = linksData[user.passcode];
                if (userLinks) {
                    for (const [title, url] of Object.entries(userLinks)) {
                        linksHTML += `<li><a href="${url}" target="_blank">${title}</a></li>`;
                    }
                } else {
                    linksHTML += '<li>No links available.</li>';
                }

                linksHTML += '</ul>';
                document.getElementById('links').innerHTML = linksHTML;
            })
            .catch(error => console.error('Error fetching links:', error));
    </script>
</body>
</html>
